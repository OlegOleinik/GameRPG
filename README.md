# test
ОБНОВЛЕНО 19.06.22
Добавлено описание заклинаний, немного изменен интерфейс

ОБНОВЛЕНО 26.05.22
Переведено на русский, отредактирован шрифт (добавлены кириллические символы). Подписаны шкалы. Нельзя начать игру или загрузить, пока не пройдено обучение на данном ПК.

ОБНОВЛЕНО 24.05.22 Нормально работает сохранение. Добавлена граница для воды, теперь без прямых углов. Добавлены спрайты песка. Добавлены звуки. С петуха теперь падают перья и куриная ножка. Внедрена система частиц. К игроку добавлена точка каста заклинаний (не из позии цигрока, около руки). Исправлен баг - зависимость длинны лазера от положения курсора относительно игрока. Добавлен противник слизень - перемезается прыжками, дропает слизь, уменьшается при уроне и испускает частицы. Добавлен цикл дня и ночи, сохраняется. Добавлены уровни для заклинаний стены и телепорта, также показывается их радиус действия. Добавлена возможность случайно расставлять тайлы травы. Для этого заменяется спрайт белого квадрата на случайные, остальные не трогаются. Скрипт, автоматически добавляющий тайлмапам стен объект с тенями внутри для теней от стен. Добавлено заклинание освещения - шар света над игроком, радиус и время зависит от уровня, со временем тускнет и гаснет. Добавлена тень для заклинания стены. Добавлен противник - скелет, атакует секироай, может искать путь к игроку в обход стен. Дропает кость, черную кость и топор. Добавлены дома, спавнер НПС. Изменена система поиска цели - теперь есть список, атакуется первый в списке. НПС-стражники атакуют врагов, враги НПС и игрока, стражники игрока при агрессии. Добавлен стражник - имеет 3 вида фраз (патрулирует, игрок достал меч, атакует), атакует игрока, если он атаковал любого НПС. Заменены курсор и иконка приложения. Область сохранения удаляется при атаке НПС. У торговца оружием новый спрайт, идет к точке спавна, случайно бегает при атаке, если игрок держит меч не торгует, дает квест на убийство 3 скелетов. Добавлен НПС мирный житель - ходит в случайных направлениях, убегает при атаке, полноценного диалога нет, говорит фразы при взаимодействии. Добавлен город, стреляющее растение - не двигается, стреляет семенами, которые оставляют частица, дропает семена и листья. Имеет цветовую схему травы для незаметности. Добавлены предметы окружения, деревья, камни, кусты и т.д., сделана карта (помещены объекты и противники на сцены). Добавлен фон с паралаксом, облака двигаются влево. Добавлен проигрышь, показывается уровень, деньги, последнее оружие и противник. Убран взмах мечем при нажатии на кнопки интерфейса. Изменена текстура иконки сохранения. Изменена тестовая локация, добавлено 2 стартовых квеста. Подправлена физика. Исправлен баг с отображением ножен при старте. Убран шанс переката, вместо него - отталкивание, влияет на силу отбрасывания при ударе мечем. Убраны лишние ячейки магии, одна пустая. Заклинание больше не активно, если меч не в руках. Исправлен баг - лазер пропадал при смене заклинания. Перересиваны шкалы на более бледные, шкала опыта теперь желто-ораньжевая. Добавлено смещение камеры.

ОБНОВЛЕНО 25.04.22 Система диалогов и квестов. Тестовый диалог с торговцем, при открытии магазина запускается квест. Изменены метожы прогрузки/отключения дальних частей мира, так как был баг. Теперь прогрузка и загрузка происходят раздельно. Добавлены сохранение игры и загрузка. Сохранение, возможно, не работает, будет исправлено. UPD: баг исправлен, но тут не обновлено

ОБНОВЛЕНО 11.04.22 Уже запускается с главного меню. Изменил вид меню, можно перетаскивать перса мышью или ходить (A D). Выход из игры по ESC, фиксы багов, анимации меню

ОБНОВЛЕНО 08.04.22 (ДЕВ-ВЕРСИЯ) !!ЗАПУСКАТЬ ТОЛЬКО СО ЦЕНЫ "0.0"!! Анимации игрока, ножны меча (теперь нормально отображаются, на левом боку персонажа, то есть, когда игрок смотрит влево, видна только часть), меч в руках игрока, мелкие улучшения в менюшках (например, кнопка продажи неактивна при пустом предмете, нективен слайдер, если не выбран предмет и т.д.), исправления багов, визуальное взаимодействие с водой, спрайт игрока поделен на 3 - тело, ноги, голова, для раздельного управления и отсутствия необходимости рисовки нескольких спрайтов. Добавлен противник - петух (ИИ полностью основан на тестовом противнике, с водой так же взаимодействует)

ОБНОВЛЕНО 03.04.22 (ДЕВ-ВЕРСИЯ) !!ЗАПУСКАТЬ ТОЛЬКО СО ЦЕНЫ "0.0"!! Так как 11.04.22 предзащита диплома, в основном занимаюсь улучшением существующего и приведеним к нормальному виду. Добавлена мана, ее трата и реген, улучшение заклинаний (только рикошетящая пуля и лазер, на 4 уровне пояляется линия прицела), влияние характеристик, связанных с магией. Добавлено освещение, шейдеры. Перерисована (скопирована из бесплатных ассетов) земля и стены. Шейдеры воды (иногда появляются облака), лазер, рикошетящая пуля. Освещение - глобальное (впоследствии будет использовано для дня/ночи), рикошетящая пуля вокруг себя. Перерисован интерфейс, другие шрифты.

ОБНОВЛЕНО 18.03.22 (ДЕВ-ВЕРСИЯ) !!ЗАПУСКАТЬ ТОЛЬКО СО ЦЕНЫ "0.0"!! В данный момент может содержать закомментированные ненужные части кода, возможно не все оптимизированно. Добавлены простые анимации игроку. Изменен метод вращения меча. Переписан лазер (что ему не особо помогло), сделано заклинание рикошетящей пули - пуля летит, набирая скорость, отскакивает от стены, при малом угле еще вращается, урон зависит от скорости. Заклинание стены - появляется стена под углом, зависимым от положения относительно игрока на месте клика мыши. От данной стены отскакивают рикошетящие заклинания, а противники не видят игрока за ним (т.е. как  и обычная стена из мира). Добавил магазин (Открывается рядом с торговцем (пока что аналогичный игроку персонаж) кликом на E, когда доступно он подсвечивается желтым), иногда открывается не с первого раза, это баг, будет справлен позднее. В магазине можно продавать/покупать вещи, проданные сохраняются у торговца, если у него в инвентаре еще есть место. На цену влияет характеристика красноречия (но покупка дороже, чем продажа). Почти все характеристики теперь влияют на игру (помимо относящихся к магии). Добавлено ограничение для их максимума, а также правильные цифры повышения. Значение отображается на панели повышения характеристик. Сделана возможность менять отружие, что меняет его внешний вид в игре и устанавливает в специальную ячейку. Добавлен фон для описания предмета. Добавлены зелья лечения и их использование. Дроп предметов привязан к взгляду игрока и тепекрь вещь появляется по правильным координатам. В описании теперь отображается цена, а также урон и лечение для меча/зелий. Добавлены деньги и их отображение в инвентаре. Для игрока добалены все ячейки инвентаря. Добавлено исчезающее название заклинания при смене над панелью заклинаний. Заклинание телепорта еще не работает, хотя и присутствует в панели заклинаний.

(ДЕВ-ВЕРСИЯ) 24.02.22 Попытка добавить заклинания. Лазер пока что нормально не работает, второе не прописал

(ДЕВ-ВЕРСИЯ) 20.02.22 Продолжение работы над системой характеристик, улучшение всех характеристик (статы меняются, но не все влияют на игру), нормальное открытие панелей (инвентарь/характеристики), спринт и выносливость, панель магии (меняется кликом, кнопками 1-9, колесиком мыши), заготовка под заклинания

ОБНОВЛЕНО 09.02.22 Начал делать систему характеристик. Добавил шкалу здоровья и опыта игрока, получение урона игроком (смерти пока нет), получение опыта с противников, задержку перед повторным получением урона игроком

ОБНОВЛЕНО 03.02.22 Наконец-то загрузил все. Переписал инвентарь, теперь работает слайдер, оптимизировал. Чтобы выкинуть предмет, надо выбрать его в инвентаре нажатием, затем количество слайдером и нажать кнопку, но пока появляется независимо от взляда. С противника падает одна вещь. Стартовая сцена-StartMenu, с других нормально не запустится, работает новая игра и выход (в собранном проекте), загрузка пока нет. Также переписал меч на Coroutine, добавил каркас для возможности серий ударов. Магии теперь нет (пока что)

16.01.22 ~~(Не загружено)~~ Прописал ИИ противника. Противник перемещается вокруг точки спавна в определенном радиусе, иногда останавливаясь. Если замечает игрока, начинает проеследовать, если игрок пропал из виду-до последней точки, где был замечен игрок, если отходит слишком далеко - возвращается на точку спавна. Противник видит игрока в определенном радиусе вокруг себя, но не видит сквозь стены. Если сталкивается со стеной, меняет направление.


09.01.22 ~~(Не загружено)~~
Чтобы не казалось, что я ничем не занят, напишу сюда что-нибудь. Сделал возможность бесшовного мира. Т.е. куски мира прогружаются вслед за передвижением игрока, что позволит делать большой мир без сильной нагрузки на систему. При отдалении части мира пропадают. Это происходит вне поля зрения, т.е. игроку не видно. Для добавления новой части мира достаточно добавить сцену, после чего все должно работать автоматически. Сделал именно так для простоты дальнейшего расширения мира и добавления новых локаций. Сделал главное меню. Сократил некоторые части кода.
!!НАКОНЕЦ ИСПРАВИЛ ТОТ БАГ С ФИЗИКОЙ ПРИ ОТТАЛКИВАНИИ В ВОДУ!!


ОБНОВЛЕНО 17.12.21
Добавлена возможность выкидывать предметы из инвентаря. Предметы появляются на некотором расстоянии от игрока по оси x в зависимости от направления взгляда игрока. Также есть небольшой разброс, чтобы предметы появлялись не в одной точке. Слайдер для выбора количества не работает. Предметы выкидываются по 1, после выкидывания 1 предмета, фокус с ячейки пропадает. Чтобы выкинуть предмет, надо выбрать ячейку ЛКМ и нажать кнопу Drop Item, после чего 1 предмет пропадет из инвентаря, а в мире появится соответствующий.


ОБНОВЛЕНО 14.12.21
Показывает описание предмета при наведении курсора



ПЕРВАЯ ВЕРСИЯ:
В данный момент:
Игрок двигается (WASD). Машет мечем (ЛКМ). Пытается в магию (ПКМ). Открывается инвентарь (I или кнопка на экране). Противники отталкиваются при ударе мечем в сторону по линии игрок-враг. Удар мечем наносит 1 урона, у противников 3 ХП, при снижении меняется цвет. При смерти противника респавнится через несколько секунд в месте изначального спавна. Дропает предметы-2, вероятность 50% для каждого (т.е. может выпасть 1, 2 разных или ни одного)(При дропе 2 одновременно одного не видно из-за схожих текстур). При попадании (столкновении) противника и игрока, игрока отталкивает. Игрок не умирает. Вода замедляет (как игрока, так и противников). Стены не дают пройти.
ИИ противников: двигаются к координатам игрока, независимо от расстояния и препятствий.




~~Необходимо переписать метод паузы игры (разбить на 2). Сейчас 1 и меняет состояние, работает, но в консоли ошибки, при добавлении других кнопок, останавливающих игру, работать перестанет.~~
Переписать игрока под систему состояний (state machine). В данный момент планируются следующие состояния: 1) Норма 2) Оглушен 3) Атакует (заблокировать смену взгляда игрока, но оставить возможность ходить) 4)(Возможно) Идет СКОРЕЕ ВСЕГО НЕ НУЖНО
~~Привязать первичный спавн противников к методу респавна~~ (Не нужно)
~~..Сделать что-то с физикой при изменении среды во время действия физики~~....ЧЕК!
Изменить способ движения игрока на физику, вместо смены координат
Убрать взмах мечем при нажатии кнопок
Изменить систему дропа (сейчас-дроп всех предметов с шансом для каждого 50%, количестве 1, на месте смерти противника. Стоит сделать вероятность для каждого, возможное количество одинаковых (самый простой вариант-дублировать в списке возможного дропа) и небольшое отклонение от точки)...частично сделано
Изменить код инвентаря так, чтобы можно было менять число ячеек без смены кода
~~?Изменить метод взмаха мечем на рекурсию?~~сделано Coroutine
?Добавить переменную, чтобы у разных мечей была разная скорость?



ВОЗМОЖНО, изменить систему дропа на обыск. Предметы не появляются на карте, а появляются в сумке/останках на месте смерти противника. Игрок может увидеть список и взять, что хочет


Планируется сделать в примерно следующем порядке
~~1.	Дописать инвентарь. Отображение описания предметов (чек), выбрасывание предметов (чек). Полностью проверить работоспособность (Возможно добавть шкалу для выбора кол-ва предметов дропа/продажи)~~ чек
2.	Система способностей
3.	Формулы, зависящие от способностей
4.	Зелья лечения/еда
  4.1 Соответственно, возможность использовать предметы
5.	Магазин с покупкой/продажей вещей
  5.1 Система денег
6.	Смерть игрока и возможность проигрыша
7.	Разное оружие и его влияние на характеристики
  7.1 Как и пункт 4.1, возможность менять оружие, отображение текущего и т.д.
  7.2 Показывать текущие характеристики в окне инвентаря
8.	~~Поле зрения~~(ЧЕК) ~~и направление противников ~~(не нужно)
9.	~~Улучшить ИИ в принципе ~~(чек)
10.	Возможно, система уровней для противников. Пока сомневаюсь, что она вообще нужна
11.	Меню (чек), сохранение
12.	Сложный режим (удаление сохранений при проигрыше)
13.	Где-то тут добавить звуки
14.	Изменение внешнего вида игрока
